<!DOCTYPE html>
<html>
  <head>
  <meta http-equiv="content-type" content="text/html; charset=utf-8">
  <meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport">
  <meta name="description" content="yanm1ng&#39;s blog">
  <meta name="keyword" content="hexo-theme, vuejs">
  
    <link rel="shortcut icon" href="/css/images/logo.png">
  
  <title>
    
      数据库系统组件 | LoopJump&#39;s Blog
    
  </title>
  <link href="//cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet">
  <link href="//cdnjs.cloudflare.com/ajax/libs/nprogress/0.2.0/nprogress.min.css" rel="stylesheet">
  <link href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/tomorrow.min.css" rel="stylesheet">
  
<link rel="stylesheet" href="/css/style.css">

  
  <script src="//cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
  <script src="//cdnjs.cloudflare.com/ajax/libs/geopattern/1.2.3/js/geopattern.min.js"></script>
  <script src="//cdnjs.cloudflare.com/ajax/libs/nprogress/0.2.0/nprogress.min.js"></script>
  
    
<script src="/js/qrious.js"></script>

  
  
  
  
    <!-- MathJax support START -->
    <script type="text/x-mathjax-config">
      MathJax.Hub.Config({
        tex2jax: {
          inlineMath: [ ['$','$'], ["\\(","\\)"]  ],
          processEscapes: true,
          skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
        }
      });
    </script>

    <script type="text/x-mathjax-config">
      MathJax.Hub.Queue(function() {
        var all = MathJax.Hub.getAllJax(), i;
        for (i=0; i < all.length; i += 1) {
          all[i].SourceElement().parentNode.className += ' has-jax';
        }
      });
    </script>
    <script type="text/javascript" src="//cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <!-- MathJax support END -->
  


  
  
    
<script src="/js/local-search.js"></script>


<meta name="generator" content="Hexo 7.3.0"></head>
<div class="wechat-share">
  <img src="/css/images/logo.png" />
</div>
  <body>
    <header class="header fixed-header">
  <div class="header-container">
    <a class="home-link" href="/">
      <div class="logo"></div>
      <span>LoopJump's Blog</span>
    </a>
    <ul class="right-list">
      
        <li class="list-item">
          
            <a href="/" class="item-link">Home</a>
          
        </li>
      
        <li class="list-item">
          
            <a href="/series/" class="item-link">Series</a>
          
        </li>
      
        <li class="list-item">
          
            <a href="/tags/" class="item-link">Tags</a>
          
        </li>
      
        <li class="list-item">
          
            <a href="/archives/" class="item-link">Archives</a>
          
        </li>
      
        <li class="list-item">
          
            <a href="/project/" class="item-link">Projects</a>
          
        </li>
      
        <li class="list-item">
          
            <a href="/about/" class="item-link">About</a>
          
        </li>
      
      
        <li class="menu-item menu-item-search right-list">
    <a role="button" class="popup-trigger">
        <i class="fa fa-search fa-fw"></i>
    </a>
</li>
      
    </ul>
    <div class="menu">
      <span class="icon-bar"></span>
      <span class="icon-bar"></span>
      <span class="icon-bar"></span>
    </div>
    <div class="menu-mask">
      <ul class="menu-list">
        
          <li class="menu-item">
            
              <a href="/" class="menu-link">Home</a>
            
          </li>
        
          <li class="menu-item">
            
              <a href="/series/" class="menu-link">Series</a>
            
          </li>
        
          <li class="menu-item">
            
              <a href="/tags/" class="menu-link">Tags</a>
            
          </li>
        
          <li class="menu-item">
            
              <a href="/archives/" class="menu-link">Archives</a>
            
          </li>
        
          <li class="menu-item">
            
              <a href="/project/" class="menu-link">Projects</a>
            
          </li>
        
          <li class="menu-item">
            
              <a href="/about/" class="menu-link">About</a>
            
          </li>
        
      </ul>
    </div>
    
      <div class="search-pop-overlay">
    <div class="popup search-popup">
        <div class="search-header">
            <span class="search-icon">
                <i class="fa fa-search"></i>
            </span>
            <div class="search-input-container">
                <input autocomplete="off" autocapitalize="off"
                    placeholder="Please enter your keyword(s) to search." spellcheck="false"
                    type="search" class="search-input">
            </div>
            <span class="popup-btn-close">
                <i class="fa fa-times-circle"></i>
            </span>
        </div>
        <div id="search-result">
            <div id="no-result">
                <i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i>
            </div>
        </div>
    </div>
</div>
    
  </div>
</header>

    <div id="article-banner">
  <h2>数据库系统组件</h2>
  <p class="post-date">2018-02-10</p>
  <div class="arrow-down">
    <a href="javascript:;"></a>
  </div>
</div>
<main class="app-body flex-box">
  <!-- Article START -->
  <article class="post-article">
    <section class="markdown-content"><p>读了Architecture of a Database System这篇经典论文，挑了些不太熟悉的内容做了笔记。</p>
<p>论文内容基本上谈不上是在讲架构吧，基本上就是罗列了下有哪些组件，而且内容基本上针对原来传统数据库的。</p>
<p><img src="https://prod-files-secure.s3.us-west-2.amazonaws.com/4c61fdf7-a36e-430e-bcfa-8388fe1d6ec9/b575946c-59fc-4ebc-9a0b-77755112cb9c/arch.png" alt="arch.png"></p>
<p>!<a target="_blank" rel="noopener" href="http://loopjump.com/wp-content/uploads/2018/02/arch.png">http://loopjump.com/wp-content/uploads/2018/02/arch.png</a></p>
<p>主要包括几个组件：</p>
<p>Client Communication Manager</p>
<p>Process Manager</p>
<p>Relational Query Processor</p>
<p>Transaction Storage Manager</p>
<p>Shared Components and Utilities</p>
<h2 id="Client-Session-Manager"><a href="#Client-Session-Manager" class="headerlink" title="Client Session Manager"></a>Client Session Manager</h2><ul>
<li>两层：Client – Database</li>
<li>三层：Client – WebServer – Database</li>
<li>四层：Client – WebServer – ApplicationServer – Database</li>
</ul>
<h2 id="Process-Model"><a href="#Process-Model" class="headerlink" title="Process Model"></a>Process Model</h2><ul>
<li>Process per DB worker: DB2, Oracle, PostgreSQL</li>
<li>Thread(OS&#x2F;DBMS thread) per DB worker: DB2, MySQL, SQL Server</li>
<li>Process Pool: Oracle, SQL Server</li>
</ul>
<h2 id="Parallel-Architure-Processes-and-Memory-Coordination"><a href="#Parallel-Architure-Processes-and-Memory-Coordination" class="headerlink" title="Parallel Architure: Processes and Memory Coordination"></a>Parallel Architure: Processes and Memory Coordination</h2><ul>
<li>Shared Memory: DB2, Oracle, SQL Server</li>
<li>Shared Nothing: DB2, Informix, Tandem, NCR Teradata, Greenplum</li>
<li>Shared Disk: Oracle RAC, RDB, DB2 for zSeries</li>
<li>NUMA(No-Uniform Memory Access): almost disappeared</li>
</ul>
<h2 id="Relational-Query-Processor"><a href="#Relational-Query-Processor" class="headerlink" title="Relational Query Processor"></a>Relational Query Processor</h2><h3 id="Query-Parsing-and-Authorization"><a href="#Query-Parsing-and-Authorization" class="headerlink" title="Query Parsing and Authorization"></a>Query Parsing and Authorization</h3><p>Parser的主要工作:</p>
<ul>
<li>检查query是否正确</li>
<li>解析名字和参照</li>
<li>将query转为optimizer使用的内部数据结构</li>
<li>验证用户权限（或者生成验证权限所需信息，推迟到执行阶段再验证）</li>
</ul>
<p>给定SQL Query之后，先解析FROM语句中的表名，通常要规范成server.database.schema.table(前缀按需)，此外要处理table alias。之后调用catalog manager来检查表在system catalog注册过，通过catalog中的信息来判断query中的参照是否合法。同时，获取列类型之后，还可以做类型推断，解决表达式计算过程种可能的重载函数决议。</p>
<p>Query parse之后，接下来是权限验证，判断用户是否有合适的权限：对表的增删改查、user defined function使用权限、参照对象的权限。有些权限检查可以在parse阶段做，比如讲salary列设置为-1，这种constraint-check就可以在parser阶段完成。不过有些权限检查是更低级别的检查，例如检查依赖具体的一行数据的值，因此要推迟到执行阶段才能做这类检查。</p>
<h3 id="Query-Rewrite"><a href="#Query-Rewrite" class="headerlink" title="Query Rewrite"></a>Query Rewrite</h3><p>Query parse并检查通过之后，进入rewriter模块。Rewriter接收一个parser的输出，并输出同样类型的内部结构。Rewriter可以作为一个独立的组件或者作为optimizer的第一步。</p>
<p>Rewriter的主要工作：</p>
<ul>
<li>view expansion: 将视图展开。从catalog提取view的定义，将view替换为对应的查询，替换指向该view的参照。如果视图里面还有视图，可递归处理。</li>
<li>常量算数计算：例如R.x &lt; 10 + 2 + R.y重写为R.x &lt; 12 + R.y。</li>
<li>谓词重写: 针对WHERE子句中的谓词和常量进行重写。例如：</li>
</ul>
<blockquote>
<p>NOT c1 &gt; 1000 &#x3D;&gt; c1 &lt;&#x3D; 1000c1 &lt; 75 AND c1 &gt; 100 &#x3D;&gt; false水平分区的数据，可以按照分区规则尝试分区剪枝传递规则: R.x &lt; 10 AND R.x &#x3D; S.y 蕴含着 S.y &lt; 10</p>
</blockquote>
<ul>
<li>语法优化</li>
</ul>
<blockquote>
<p>冗余join消除: 例如 SELECT Emp.name, Emp.salary FROM Emp, Dept WHERE Emp.deptno &#x3D; Dep.dno可以消除Dep表。子查询展开和其他启发式重写:大部分optimizer是针对单个SELECT-FROM-WHERE查询块，因此rewriter有时候需要将嵌套查询转为单个查询块（该过程称为query normalization）。</p>
</blockquote>
<h2 id="Query-Optimizer"><a href="#Query-Optimizer" class="headerlink" title="Query Optimizer"></a>Query Optimizer</h2><p>查询优化器负责将查询的内部表示(rewriter的输出结果)转为一个高效的执行计划。查询计划可以被视为一个数据流图，表的数据通过数据流图执行处理。</p>
<p><img src="https://prod-files-secure.s3.us-west-2.amazonaws.com/4c61fdf7-a36e-430e-bcfa-8388fe1d6ec9/0c307abc-9214-43b7-95ba-e3856e670897/qplan.png" alt="qplan.png"></p>
<p>!<a target="_blank" rel="noopener" href="http://loopjump.com/wp-content/uploads/2018/02/qplan.png">http://loopjump.com/wp-content/uploads/2018/02/qplan.png</a></p>
<p>优化器首先使用一些既有的技术处理SELECT-FROM-WHERE查询块，完成后再增加算子处理GroupBy、OrderBy、Having、Distinct。</p>
<p>执行计划有多种表示方式。一早的时候，System R是将执行计划直接编译成机器码（后来商用时换成了可解释的形式）。Ingres会生成可解释的查询计划结果。目前商用数据库产品基本都是用某种中间格式表示执行计划，但是具体使用的抽象层次不一样。</p>
<p>除了Selinger那篇关于优化器的经典论文之外，很多系统进行了多种扩展：</p>
<ul>
<li>Plan space:</li>
<li>Selectivity estimation:</li>
<li>Search Alogrithms:</li>
<li>Parallelism:</li>
<li>Auto-Tuning:</li>
</ul>
<h3 id="A-Note-on-Query-Compilation-and-Recompilation"><a href="#A-Note-on-Query-Compilation-and-Recompilation" class="headerlink" title="A Note on Query Compilation and Recompilation"></a>A Note on Query Compilation and Recompilation</h3><h2 id="Query-Executor"><a href="#Query-Executor" class="headerlink" title="Query Executor"></a>Query Executor</h2><p>两种执行方式，一种是将执行计划编译成低级的操作码再执行，一种是执行器收到的是数据流图(dataflow graph)，递归调用operator的过程。这里关注第二种方式。</p>
<p>大部分执行器都采用了iterator模型。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">class iterator</span><br><span class="line">&#123;</span><br><span class="line">    iterator &amp;inputs[];</span><br><span class="line">    void init();</span><br><span class="line">    tuple get_next();</span><br><span class="line">    void close();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>一个迭代器的inputs是数据流图中的某条边，所有的operator(数据流图中的节点)都是迭代器对象。这些迭代器对象可以是filescan、indxscan、sort、nested-loops join、merge-join、hash-join、duplicate-elimination、group-aggregation。一个迭代器对象可以是另外一个迭代器对象的输入，每个迭代器对象都是独立的。</p>
<p>迭代器模型的一个重要特点是将数据流和控制流耦合起来了。get_next()执行结束后，就有一行结果返回。这个模型非常适合单线程执行，但如果要支持并行执行，这个模型也不需要大改，并发执行和涉及网络的部分可以封装成exchange iterator。</p>
<p>迭代器模型下的执行期数据存储：tuple descriptor（schema信息）是迭代器对象预先分配好的，该迭代器对象的多个输入流和一个输出流都各自有一个tuple描述。实际数据存放在buffer pool，可以使用引用计数或者直接copy出来的方式获取该tuple。</p>
<p>更新语句与只读查询语句类似，只是在流水线最后多了一个更新的operator。</p>
<h2 id="Access-Method"><a href="#Access-Method" class="headerlink" title="Access Method"></a>Access Method</h2><p>Access Method是指访问磁盘数据结构的routine，通常包括堆文件和索引。</p>
<p>主流的商业数据库都实现了B+tree索引，有些还实现了R-tree索引等。PostreSQL还支持可扩展的索引Generalized Search Tree(GiST)，并实现R-tree来索引多维数据，RD-tree来索引文本数据。IBM UDB V8系统引入了Multi-Dimensional Clustered(MDC) Index来支持多维数据上的范围查询。有些几乎只读的数据仓库会使用bitmap等索引方式。注：2017年最新的研究已经开始使用机器学习来做索引了(learned index)。</p>
<p>Access method的最基本的api即迭代器的API。init()接口用于接受查询参数(查询条件，search argument, SARG)，get_next()用于返回满足条件的行或者没有满足条件时返回NULL。SARG之所以会被下压到access method层，一是B+tree等需要查询条件来查询，二是条件下压有助于避免不必要的数据往上吐。</p>
<p>所有的数据库都需要某种方法指明表中的一行。一种直接的想法是直接使用row ID(RID)，RID代表该行在磁盘上的位置。这种方法直接，方便读取，但不适合数据移动（比如行size变大或者B+tree分裂），比如二级索引通过RID来指向表中该行，当表中这一行移动时，要修改指向这行的二级索引行成本很高。另外一种方法是二级索引中不记录RID，而是记录主键值，通过索引查到主键值然后回表查原始行，这种方法牺牲了查询性能，但避免了行移动带来的问题。</p>
<h2 id="Data-Warehouse相关的几个问题"><a href="#Data-Warehouse相关的几个问题" class="headerlink" title="Data Warehouse相关的几个问题"></a>Data Warehouse相关的几个问题</h2><p>数据仓库通常用于决策分析，数据通常经过ETL(extract, transform, load)处理，然后几乎全是只读查询。</p>
<h3 id="Bitmap索引"><a href="#Bitmap索引" class="headerlink" title="Bitmap索引"></a>Bitmap索引</h3><p>B+tree是针对插入删除优化的索引方式。数据仓库因为是只读查询，对于类似性别等列的值，可以用位图存放(行数固定，每行对应一个bit)，可以极大节省空间。另外，位图有时候也可以加快条件and的判断，例如sex&#x3D;‘F’ &amp;&amp; state&#x3D;‘California’之类的查询可以直接使用bit的与操作判断。位操作有大量的技巧可供使用。</p>
<h3 id="Fast-Load"><a href="#Fast-Load" class="headerlink" title="Fast Load"></a>Fast Load</h3><p>以前业务是晚间无修改，管理员可以趁晚上进行数据重新ETL。但现在很多业务要24小时在线，更新过程如果加写锁，可能影响读查询。MVCC(multi-version concurrent control)可以提供历史快照，减少写对读的影响。</p>
<h3 id="Materialized-View"><a href="#Materialized-View" class="headerlink" title="Materialized View"></a>Materialized View</h3><p>数据仓库中有一些跨表的join查询，有时候会存为视图，为了加速查询，有些系统会提供物化视图，将视图作为一个真正的物理表存放，这样查询时可以直接查询物化视图从而避免join。</p>
<p>物化视图如何维护freshness: 可以实时更新，也可以周期性地重建。</p>
<h3 id="OLAP和Ad-hoc-Query-Support"><a href="#OLAP和Ad-hoc-Query-Support" class="headerlink" title="OLAP和Ad-hoc Query Support"></a>OLAP和Ad-hoc Query Support</h3><h3 id="Optimization-of-Snowflake-Schema-Queries"><a href="#Optimization-of-Snowflake-Schema-Queries" class="headerlink" title="Optimization of Snowflake Schema Queries"></a>Optimization of Snowflake Schema Queries</h3><h2 id="Storage-Management"><a href="#Storage-Management" class="headerlink" title="Storage Management"></a>Storage Management</h2><p>DBMS有两种方式访问存储：直接与块设备交互或者通过OS文件系统交互，具体哪种方式会影响数据库对存储的空间和时间两方面的控制能力。</p>
<h3 id="Spatial-Control"><a href="#Spatial-Control" class="headerlink" title="Spatial Control"></a>Spatial Control</h3><p>直接控制落盘会比通过OS更好，因为数据库更知道自己的workload的情况。不过目前业界发展趋势是容器化，数据库的容器化这个方向貌似还是有争议。</p>
<h3 id="Temporal-Control"><a href="#Temporal-Control" class="headerlink" title="Temporal Control"></a>Temporal Control</h3><p>主要就是Buffer。</p>
<h2 id="Transactions-Concurrency-Control-and-Recovery"><a href="#Transactions-Concurrency-Control-and-Recovery" class="headerlink" title="Transactions: Concurrency Control and Recovery"></a>Transactions: Concurrency Control and Recovery</h2><p>事务主要包括四块：</p>
<ul>
<li>lock manager for CC</li>
<li>log manager for recovery</li>
<li>buffer pool for staging database IOs</li>
<li>access methods for organizing data on disk</li>
</ul>
<h3 id="ACID"><a href="#ACID" class="headerlink" title="ACID"></a>ACID</h3><p>事务的四大特性，Atomicity, Consistency, Isolation, Durability。教科书上讲的比较清楚了。</p>
<h3 id="Locking-and-Latching"><a href="#Locking-and-Latching" class="headerlink" title="Locking and Latching"></a>Locking and Latching</h3><p>Lock更像是数据库概念下的锁，例如行锁，表锁。</p>
<p>Latch更像是数据结构层面的锁，类似于信号量。</p>
<h3 id="Isolation-Level"><a href="#Isolation-Level" class="headerlink" title="Isolation Level"></a>Isolation Level</h3><p>可以参考Jim Gray的经典论文。</p>
<h3 id="Log-Manager"><a href="#Log-Manager" class="headerlink" title="Log Manager"></a>Log Manager</h3><p>就是ARIES这套理论(wal, redo, undo)。</p>
<h1 id="Shared-Components"><a href="#Shared-Components" class="headerlink" title="Shared Components"></a>Shared Components</h1><h2 id="Catalog-Manager"><a href="#Catalog-Manager" class="headerlink" title="Catalog Manager"></a>Catalog Manager</h2><p>存放user, schema, table等元数据。</p>
<h2 id="Memory-Allocator"><a href="#Memory-Allocator" class="headerlink" title="Memory Allocator"></a>Memory Allocator</h2><p>数据库一般自己管理内存，尤其是涉及到云数据库的租户内存，内存超卖等问题。</p>
<h2 id="Replication-Service"><a href="#Replication-Service" class="headerlink" title="Replication Service"></a>Replication Service</h2><p>目前高可用的数据库一般把replication内置到存储引擎的log manager模块中，通常用Paxos多副本方式保持高可用(可用性要求不高的话可以用主备模式)。</p>
<h2 id="Administrator-Monitoring-Utilities"><a href="#Administrator-Monitoring-Utilities" class="headerlink" title="Administrator, Monitoring, Utilities"></a>Administrator, Monitoring, Utilities</h2></section>
    <!-- Tags START -->
    
      <div class="tags">
        <span>Tags:</span>
        
  <a href="/tags#Database" >
    <span class="tag-code">Database</span>
  </a>

      </div>
    
    <!-- Tags END -->
    <!-- NAV START -->
    
  <div class="nav-container">
    <!-- reverse left and right to put prev and next in a more logic postition -->
    
      <a class="nav-left" href="/deep-class/">
        <span class="nav-arrow">← </span>
        
          Deep Class
        
      </a>
    
    
      <a class="nav-right" href="/data-model-history/">
        
          以史为鉴：数据模型变迁史
        
        <span class="nav-arrow"> →</span>
      </a>
    
  </div>

    <!-- NAV END -->
    <!-- 打赏 START -->
    
    <!-- 打赏 END -->
    <!-- 二维码 START -->
    
      <div class="qrcode">
        <canvas id="share-qrcode"></canvas>
        <p class="notice">扫描二维码，分享此文章</p>
      </div>
    
    <!-- 二维码 END -->
    
      <!-- Utterances START -->
      <div id="utterances"></div>
      <script src="https://utteranc.es/client.js"
        repo=""
        issue-term="pathname"
        theme="github-light"
        crossorigin="anonymous"
        async></script>    
      <!-- Utterances END -->
    
  </article>
  <!-- Article END -->
  <!-- Catalog START -->
  
  <!-- Catalog END -->
</main>

<script>
  (function () {
    var url = 'http://example.com/dbms-arch/';
    var banner = ''
    if (banner !== '' && banner !== 'undefined' && banner !== 'null') {
      $('#article-banner').css({
        'background-image': 'url(' + banner + ')'
      })
    } else {
      $('#article-banner').geopattern(url)
    }
    $('.header').removeClass('fixed-header')

    // error image
    $(".markdown-content img").on('error', function() {
      $(this).attr('src', '/css/images/error_icon.png')
      $(this).css({
        'cursor': 'default'
      })
    })

    // zoom image
    $(".markdown-content img").on('click', function() {
      var src = $(this).attr('src')
      if (src !== '/css/images/error_icon.png') {
        var imageW = $(this).width()
        var imageH = $(this).height()

        var zoom = ($(window).width() * 0.95 / imageW).toFixed(2)
        zoom = zoom < 1 ? 1 : zoom
        zoom = zoom > 2 ? 2 : zoom
        var transY = (($(window).height() - imageH) / 2).toFixed(2)

        $('body').append('<div class="image-view-wrap"><div class="image-view-inner"><img src="'+ src +'" /></div></div>')
        $('.image-view-wrap').addClass('wrap-active')
        $('.image-view-wrap img').css({
          'width': `${imageW}`,
          'transform': `translate3d(0, ${transY}px, 0) scale3d(${zoom}, ${zoom}, 1)`
        })
        $('html').css('overflow', 'hidden')

        $('.image-view-wrap').on('click', function() {
          $(this).remove()
          $('html').attr('style', '')
        })
      }
    })
  })();
</script>


  <script>
    var qr = new QRious({
      element: document.getElementById('share-qrcode'),
      value: document.location.href
    });
  </script>






    <div class="scroll-top">
  <span class="arrow-icon"></span>
</div>
    <footer class="app-footer">
  <p class="copyright">
    &copy; 2024 | Proudly powered by <a href="https://hexo.io" target="_blank">Hexo</a>
    <br>
    Theme by <a target="_blank" rel="noopener" href="https://github.com/yanm1ng">yanm1ng</a>
    
        <br>
        
            <a href="http://www.beian.gov.cn/portal/registerSystemInfo?recordcode=2023016451" target="_blank" rel="noopener nofollow"><img src="/css/images/ga.png" width="18" height="18"> 京公网安备 2023016451号</a>
        
    
  </p>
</footer>

<script>
  function async(u, c) {
    var d = document, t = 'script',
      o = d.createElement(t),
      s = d.getElementsByTagName(t)[0];
    o.src = u;
    if (c) { o.addEventListener('load', function (e) { c(null, e); }, false); }
    s.parentNode.insertBefore(o, s);
  }
</script>
<script>
  async("//cdnjs.cloudflare.com/ajax/libs/fastclick/1.0.6/fastclick.min.js", function(){
    FastClick.attach(document.body);
  })
</script>

<script>
  var hasLine = 'true';
  async("//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js", function(){
    $('figure pre').each(function(i, block) {
      var figure = $(this).parents('figure');
      if (hasLine === 'false') {
        figure.find('.gutter').hide();
      }
      hljs.configure({useBR: true});
      var lang = figure.attr('class').split(' ')[1] || 'code';
      var codeHtml = $(this).html();
      var codeTag = document.createElement('code');
      codeTag.className = lang;
      codeTag.innerHTML = codeHtml;
      $(this).attr('class', '').empty().html(codeTag);
      figure.attr('data-lang', lang.toUpperCase());
      hljs.highlightBlock(block);
    });
  })
</script>
<!-- Baidu Tongji -->


<script src="/js/script.js"></script>


  </body>
</html>